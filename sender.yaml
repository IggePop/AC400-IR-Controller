remote_transmitter:
  pin: D4
  carrier_duty_percent: 50%

script:
  - id: ir_send
    mode: queued
    parameters:
      data: string
    then:
      - remote_transmitter.transmit_raw:
          carrier_frequency: 38kHz
          code: !lambda |-
            std::vector<int> raw;
            raw.reserve(data.length() * 2);

            const int LEADER    = 8840;
            const int PAUSE     = -4296;
            const int SEPARATOR = 759;
            const int PULSE     = -402;
            const int ZERO      = 1258;
            const int ONE       = -1597;

            raw.push_back(LEADER);
            raw.push_back(PAUSE);

            for (char c : data) {
              if (c == '0') {
                raw.push_back(ZERO);
                raw.push_back(PULSE);
              } else if (c == '1') {
                raw.push_back(SEPARATOR);
                raw.push_back(ONE);
              }
            }

            return raw;

button:
  - platform: template
    name: "Off"
    on_press:
      - script.execute:
          id: ir_send
          #      <ADDRESS>        <CMD>    <~CMD>   <REST>                   <REPEAT> <ADDRESS>        <CMD>    <~CMD>   <REST>
          data: "0000000011111111 00001001 11110110 001000000000110100000100 11111111 0000000011111111 00001001 11110110 001000000000110100000100"
  - platform: template
    name: "On"
    on_press:
      - script.execute:
          id: ir_send
          #      <ADDRESS>        <CMD>    <~CMD>   <REST>                   <REPEAT> <ADDRESS>        <CMD>    <~CMD>   <REST>
          data: "0000000011111111 00001100 11110011 001000000000110100000100 11111111 0000000011111111 00001100 11110011 001000000000110100000100"
  - platform: template
    name: "Time"
    on_press:
      - script.execute:
          id: ir_send
          #      <ADDRESS>        <CMD>    <~CMD>   <REST>                   <REPEAT> <ADDRESS>        <CMD>    <~CMD>   <REST>
          data: "0000000011111111 00000101 11111010 001000000000110100000100 11111111 0000000011111111 00000101 11111010 001000000000110100000100"
